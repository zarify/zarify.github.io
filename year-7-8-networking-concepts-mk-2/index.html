<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Year 7-8 Networking Concepts Mk 2 - Headtilt</title><meta name="description" content="Back in 2017 when I was first thinking about how I could&hellip;"><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://headtilt.me/year-7-8-networking-concepts-mk-2/"><link rel="alternate" type="application/atom+xml" href="https://headtilt.me/feed.xml"><link rel="alternate" type="application/json" href="https://headtilt.me/feed.json"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@robpoulter"><meta name="twitter:title" content="Year 7-8 Networking Concepts Mk 2"><meta name="twitter:description" content="Back in 2017 when I was first thinking about how I could&hellip;"><meta name="twitter:image" content="https://headtilt.me/media/posts/81/pair_microbit.png"><link rel="shortcut icon" href="https://headtilt.me/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://fonts.googleapis.com/css?family=Heebo:400,500|Playfair+Display:400" as="font" crossorigin><link rel="stylesheet" href="https://headtilt.me/assets/css/style.css?v=7aaef5a7341c740e40570fe5042e66fa"><link rel="stylesheet" href="https://headtilt.me/assets/css/photoswipe.css?v=966dabfb3dfb423703bc6983e34f4ef2"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://headtilt.me/year-7-8-networking-concepts-mk-2/"},"headline":"Year 7-8 Networking Concepts Mk 2","datePublished":"2020-06-27T13:11","dateModified":"2020-06-27T13:17","image":{"@type":"ImageObject","url":"https://headtilt.me/media/posts/81/pair_microbit.png","height":508,"width":852},"description":"Back in 2017 when I was first thinking about how I could&hellip;","author":{"@type":"Person","name":"Rob"},"publisher":{"@type":"Organization","name":"Rob","logo":{"@type":"ImageObject","url":"https://headtilt.me/media/website/slice1.png","height":78,"width":354}}}</script><script async src="https://headtilt.me/assets/js/lazysizes.min.js?v=739e7d27e1cbc58b1b2e6882674b8867"></script><link rel="stylesheet" href="https://headtilt.me/assets/css/prism.css?v=718e86b555366857a48cea2de2ecf136"></head><body><div class="container"><header class="js-top"><a class="logo" href="https://headtilt.me/"><img src="https://headtilt.me/media/website/slice1.png" alt="Headtilt"></a><div class="top"><nav class="navbar js-navbar"><button class="navbar__toggle js-navbar__toggle" aria-expanded="false">Menu</button><ul class="navbar__menu"><li><a href="https://headtilt.me/wag/ramble/" target="_self">Ramble</a></li><li><a href="https://headtilt.me/wag/classroom/" target="_self">Classroom</a></li><li><a href="https://headtilt.me/About/" target="_self">About</a></li></ul></nav></div></header><main><article class="post u-wrapper"><header class="hero"><p class="post__meta">By <a href="https://headtilt.me/authors/rob/" rel="author" title="Rob">Rob</a> Published on <time datetime="2020-06-27T13:11">June 27, 2020</time></p><h1 class="post__title">Year 7-8 Networking Concepts Mk 2</h1></header><div class="post__featured-image post__image--normal"><img src="https://headtilt.me/media/posts/81/responsive/pair_microbit-xs.png" data-srcset="https://headtilt.me/media/posts/81/responsive/pair_microbit-xs.png 300w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-sm.png 480w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-md.png 768w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-lg.png 1024w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-xl.png 1360w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-2xl.png 1600w ,https://headtilt.me/media/posts/81/responsive/pair_microbit-sm2.png 375w" data-sizes="auto" height="508" width="852" alt="" class="lazyload blur-up"></div><div class="post__entry"><p><a href="https://headtilt.me/year-7-8-wireless-network-concepts-with-microbits/">Back in 2017</a> when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick some nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting someÂ ideas from the <a href="https://microbit.nominetresearch.uk/networking-book-online-python/">Networking with the micro:bit book</a>, and <a href="https://learnlearn.uk/microbit/topics/networking-two-microbits/">using basic wired networks for Morse Code</a> (the linked site is not the original project I used the idea from, but there are only so many permutations).</p><p>Through a series of short activities we crammed in:</p><ul><li>Calculating throughput</li><li>Asymmetric speeds in networks (albeit in a slightly clumsy way)</li><li>Wired vs wireless communication</li><li>Broadcast and unicast wireless transmission</li><li>Attenuation and interference</li><li>Noisy channels and collisions</li><li>Latency</li><li>Privacy of communication on networks (still trying to come up with a better way of introducing crypto in a hands on way, <a href="https://headtilt.me/year-7-8-bad-crypto-with-microbits/">my previous attempt was not great</a>)</li></ul><p>Whilst I still think the ideas are good ones, it was a classic case of plans not surviving contact with the enemy: my students found all the ways to break my programs, misunderstand how they worked, and otherwise turn the exercise into a hassle for a significant minority of the class.</p><h2>Multiple Pairs of Clients</h2><p>The basic problem boiled down to that whilst it was a great prompt for discussing a lot of the problems with busy wireless networks as well as privacy, having up to 15 pairs of clients all trying to communicate at once is a nightmare.</p><p>My original solution was to allocate each pair a wireless group/channel which they manually navigated to via button presses, and then sat blissfully operating in their own little slice of spectrum. Of course this is predicated on students following instructions, not being malicious, not running past their allocated group because they pressed the button too many times (an issue when you hit group 10+ as the display starts slowly scrolling the group number and students get impatient), etc.</p><p>For a number of pairs of students, this then turns into a festival of resetting their device to return to the default group and incrementing their group once again, this time with the additional chatter of existing communication flying past on their screens as they waltz through other students' channels.</p><p>My first solution to this problem was to have a toggle switch for the radio, so devices started out in the off state, you change the group up to yours without network activity to distract you, and then off you go. Seasoned teachers will no doubt predict how much that helped; students didn't pay attention to the fact their radios were off by default, and complained their program wasn't working, got to the correct channel tried it out with the radio turned off and reset their device, etc.</p><h2>Enter Pairing</h2><p>Over the last year I've been playing around with writing programs based on wireless signal strength, such as my <a href="https://headtilt.me/dowsing-for-radio/">PKE Meter</a> and <a href="https://headtilt.me/robotics-showcase-epidemic/">virus simulator</a>. Whilst thinking about modifying my latency program to artificially introduce range-based latency, it hit me that I could use the wireless RSSI value to initially pair Micro:bits for other activities, exchanging device IDs and allowing me to sidestep the annoying problem of changing groups and malicious actors. The Micro:bit already sort of <a href="https://support.microbit.org/support/solutions/articles/19000030849-how-to-use-radio-group-codes-with-the-makecode-editor">does pairing via group numbers</a> (interestingly, using a hash of your code to determine a group number if it is not explicity set!) so I was already doing this, but as a manual step rather than as an automatic process based on proximity.</p><p>I whipped up a basic three way handshake pairing system with an RSSI threshold that required the devices to be almost right next to each other and incorporated it into my programs. It remains to be seen how well this will work with 30-odd devices running at once (I've had issues with the short message queue on Micro:bits before) but I live in hope. Sadly I always have my ideas right at the end of a topic, so I'm either going to have to shoe-horn this into another class for testing, co-opt some 'volunteers', or wait until next year.</p><p>Below is the MakeCode pairing code I'm currently using (and feels super clumsy and no doubt I'll refine next year when it's too late to use the changes in class again ðŸ¤£).</p><div class="gallery" data-is-empty="false" data-columns="3"><figure class="gallery__item"><a href="https://headtilt.me/media/posts/81//gallery/pair_request.png" data-size="247x377"><img src="https://headtilt.me/media/posts/81//gallery/pair_request-thumbnail.png" alt="" width="240" height="240"></a><figcaption class="gallery-description">Send out a pair request with a 2 second timeout.</figcaption></figure><figure class="gallery__item"><a href="https://headtilt.me/media/posts/81//gallery/pair_radio_1.png" data-size="573x436"><img src="https://headtilt.me/media/posts/81//gallery/pair_radio_1-thumbnail.png" alt="" width="240" height="240"></a><figcaption class="gallery-description">Capture a pair request, check for strong signal, increment state, and send reply.</figcaption></figure><figure class="gallery__item"><a href="https://headtilt.me/media/posts/81//gallery/pair_radio_2.png" data-size="573x510"><img src="https://headtilt.me/media/posts/81//gallery/pair_radio_2-thumbnail.png" alt="" width="240" height="240"></a><figcaption class="gallery-description">Receive reply, respond with success and pair, or receive response and pair, incrementing state and capturing device ID.</figcaption></figure></div></div><footer class="post__footer"><div class="post__last-updated">This article was updated on June 27, 2020</div><div class="post__footer__col"><ul class="post__tag"><li><a href="https://headtilt.me/wag/classroom/">classroom</a></li><li><a href="https://headtilt.me/wag/compsci/">compsci</a></li><li><a href="https://headtilt.me/wag/microbit/">microbit</a></li><li><a href="https://headtilt.me/wag/networking/">networking</a></li></ul></div><nav class="post__nav"><div class="post__nav__prev">Previous Post<h5><a href="https://headtilt.me/robotics-showcase-epidemic/" class="inverse" rel="prev">Micro:bit Epidemic</a></h5></div></nav></footer></article></main><footer class="footer"><div class="footer__copyright">Powered by inertia.</div><div class="footer__social"><a href="https://twitter.com/robpoulter" aria-label="Twitter"><svg class="icon"><use xlink:href="https://headtilt.me/assets/svg/svg-map.svg#twitter"/></svg></a></div></footer></div><script defer="defer" src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script defer="defer" src="https://headtilt.me/assets/js/scripts.min.js?v=f503b0ac46db9f99180b3b9f932c7f9a"></script><script defer="defer" src="https://headtilt.me/assets/js/photoswipe.min.js?v=9c62086e50d89a9b6a29389a70ee0d65"></script><script defer="defer" src="https://headtilt.me/assets/js/photoswipe-ui-default.min.js?v=aafb02c13ce2b295ff34a8ac0db67cbb"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
              linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
              if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
              item.el=figureEl;items.push(item);}
              return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
              var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
              if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
              nodeIndex++;}
              if(index>=0){openPhotoSwipe(index,clickedGallery);}
              return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
              var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
              var pair=vars[i].split('=');if(pair.length<2){continue;}
              params[pair[0]]=pair[1];}
              if(params.gid){params.gid=parseInt(params.gid,10);}
              return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
              mainClass:'',
              hideAnimationDuration:200,
              showAnimationDuration:0,
              bgOpacity: 0.7,
              showHideOpacity:true,
              closeOnScroll: true,
              arrowKeys: true,
              closeEl: true,
              captionEl: true,
              fullscreenEl: true,
              zoomEl: true,
              shareEl: true,
              counterEl: true,
              arrowEl: true,
              preloaderEl: true
              };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
              if(isNaN(options.index)){return;}
              if(disableAnimation){options.showAnimationDuration=0;}
              gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
              var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script>(function() {
    		var script = document.createElement('script');
    		window.counter = 'https://headtilt_me.goatcounter.com/count'
    		script.async = 1;
    		script.src = '//gc.zgo.at/count.js';
    
    		var ins = document.getElementsByTagName('script')[0];
    		ins.parentNode.insertBefore(script, ins)
    	})();</script><script defer="defer" src="https://headtilt.me/assets/js/prism.js?v=afcf02720f838e992a12336758017bcf"></script></body></html>