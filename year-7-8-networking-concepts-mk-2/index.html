<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Year 7-8 Networking Concepts Mk 2 | Headtilt</title>
<meta name="keywords" content="compsci, microbit, networking">
<meta name="description" content="Back in 2017 when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the Networking With the micro:bit book, and using basic wired networks for Morse Code (the linked site is not the original project I used the idea from, but there are only so many permutations).">
<meta name="author" content="Rob">
<link rel="canonical" href="/year-7-8-networking-concepts-mk-2/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css" integrity="sha256-1vzSCk&#43;4bvpN&#43;sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="/year-7-8-networking-concepts-mk-2/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><script src="https://kit.fontawesome.com/3ec5c52433.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/formatting.css"><meta property="og:url" content="/year-7-8-networking-concepts-mk-2/">
  <meta property="og:site_name" content="Headtilt">
  <meta property="og:title" content="Year 7-8 Networking Concepts Mk 2">
  <meta property="og:description" content="Back in 2017 when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the Networking With the micro:bit book, and using basic wired networks for Morse Code (the linked site is not the original project I used the idea from, but there are only so many permutations).">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2020-06-27T13:11:24+00:00">
    <meta property="article:modified_time" content="2020-06-27T13:11:24+00:00">
    <meta property="article:tag" content="Compsci">
    <meta property="article:tag" content="Microbit">
    <meta property="article:tag" content="Networking">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Year 7-8 Networking Concepts Mk 2">
<meta name="twitter:description" content="Back in 2017 when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the Networking With the micro:bit book, and using basic wired networks for Morse Code (the linked site is not the original project I used the idea from, but there are only so many permutations).">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Year 7-8 Networking Concepts Mk 2",
      "item": "/year-7-8-networking-concepts-mk-2/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Year 7-8 Networking Concepts Mk 2",
  "name": "Year 7-8 Networking Concepts Mk 2",
  "description": "Back in 2017 when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the Networking With the micro:bit book, and using basic wired networks for Morse Code (the linked site is not the original project I used the idea from, but there are only so many permutations).\n",
  "keywords": [
    "compsci", "microbit", "networking"
  ],
  "articleBody": "Back in 2017 when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the Networking With the micro:bit book, and using basic wired networks for Morse Code (the linked site is not the original project I used the idea from, but there are only so many permutations).\nThrough a series of short activities we crammed in:\nCalculating throughput Asymmetric speeds in networks (albeit in a slightly clumsy way) Wired vs wireless communication Broadcast and unicast wireless transmission Attenuation and interference Noisy channels and collisions Latency Privacy of communication on networks (still trying to come up with a better way of introducing crypto in a hands on way, my previous attempt was not great) Whilst I still think the ideas are good ones, it was a classic case of plans not surviving contact with the enemy: my students found all the ways to break my programs, misunderstand how they worked, and otherwise turn the exercise into a hassle for a significant minority of the class.\nMultiple Pairs of Clients The basic problem boiled down to that whilst it was a great prompt for discussing a lot of the problems with busy wireless networks as well as privacy, having up to 15 pairs of clients all trying to communicate at once is a nightmare.\nMy original solution was to allocate each pair a wireless group/channel which they manually navigated to via button presses, and then sat blissfully operating in their own little slice of spectrum. Of course this is predicated on students following instructions, not being malicious, not running past their allocated group because they pressed the button too many times (an issue when you hit group 10+ as the display starts slowly scrolling the group number and students get impatient), etc.\nFor a number of pairs of students, this then turns into a festival of resetting their device to return to the default group and incrementing their group once again, this time with the additional chatter of existing communication flying past on their screens as they waltz through other studentsâ€™ channels.\nMy first solution to this problem was to have a toggle switch for the radio, so devices started out in the off state, you change the group up to yours without network activity to distract you, and then off you go. Seasoned teachers will no doubt predict how much that helped; students didnâ€™t pay attention to the fact their radios were off by default, and complained their program wasnâ€™t working, got to the correct channel tried it out with the radio turned off and reset their device, etc.\nEnter Pairing Over the last year Iâ€™ve been playing around with writing programs based on wireless signal strength, such as my PKE Meter. Whilst thinking about modifying my latency program to artificially introduce range-based latency, it hit me that I could use the wireless RSSI value to initially pair Micro:bits for other activities, exchanging device IDs and allowing me to sidestep the annoying problem of changing groups and malicious actors. The Micro:bit already sort of does pairing via group numbers (interestingly, using a hash of your code to determine a group number if it is not explicity set!) so I was already doing this, but as a manual step rather than as an automatic process based on proximity.\nI whipped up a basic three way handshake pairing system with an RSSI threshold that required the devices to be almost right next to each other and incorporated it into my programs. It remains to be seen how well this will work with 30-odd devices running at once (Iâ€™ve had issues with the short message queue on Micro:bits before) but I live in hope. Sadly I always have my ideas right at the end of a topic, so Iâ€™m either going to have to shoe-horn this into another class for testing, co-opt some â€˜volunteersâ€™, or wait until next year.\nBelow is the MakeCode pairing code Iâ€™m currently using (and feels super clumsy and no doubt Iâ€™ll refine next year when itâ€™s too late to use the changes in class again ðŸ¤£).\npair_radio_1 pair_radio_2 pair_request The basic process is:\nSend out a pair request with a 2 second timeout. Capture a pair request, check for strong signal, increment state, and send reply. Receive reply, respond with success and pair, or receive response and pair, incrementing state and capturing device ID. Hereâ€™s a copy of the latency program incorporating the new pairing code (thereâ€™s a small logic bug to do with the 5 second response timeout on pings Iâ€™ll figure out eventually - I really dislike debugging block code :( )\n",
  "wordCount" : "797",
  "inLanguage": "en",
  "datePublished": "2020-06-27T13:11:24.102Z",
  "dateModified": "2020-06-27T13:11:24.102Z",
  "author":{
    "@type": "Person",
    "name": "Rob"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/year-7-8-networking-concepts-mk-2/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Headtilt",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Adjust your angle (Alt + H)">
                <img src="/images/headtilt.png" alt="" aria-label="logo"
                    height="30">Adjust your angle</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="/post" title="posts">
                    <span><i class="fa-solid fa-pen-to-square"></i> posts</span>
                </a>
            </li>
            <li>
                <a href="/page/about/" title="about">
                    <span><i class="fa-solid fa-circle-info"></i> about</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="categories">
                    <span><i class="fa-solid fa-layer-group"></i> categories</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="tags">
                    <span><i class="fa-solid fa-tags"></i> tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Year 7-8 Networking Concepts Mk 2
    </h1>
    <div class="post-meta"><span title='2020-06-27 13:11:24.102 +0000 UTC'>Sat, Jun 27, 2020</span>&nbsp;Â·&nbsp;Rob

</div>
  </header> 
  <div class="post-content"><img loading="lazy" src="/images/pairing/pair_microbit.png"><p><a href="/year-7-8-wireless-network-concepts-with-microbits/">Back in 2017</a> when I was first thinking about how I could use physical computing like Micro:bits in my classroom, I wrote some quick and nasty programs to demonstrate networking concepts like attenuation and latency in wireless connections as well as adapting some ideas from the <a href="https://microbit.nominetresearch.uk/networking-book-online-python/">Networking With the micro:bit book</a>, and <a href="https://learnlearn.uk/microbit/topics/networking-two-microbits/">using basic wired networks for Morse Code</a> (the linked site is not the original project I used the idea from, but there are only so many permutations).</p>
<p>Through a series of short activities we crammed in:</p>
<ul>
<li>Calculating throughput</li>
<li>Asymmetric speeds in networks (albeit in a slightly clumsy way)</li>
<li>Wired vs wireless communication</li>
<li>Broadcast and unicast wireless transmission</li>
<li>Attenuation and interference</li>
<li>Noisy channels and collisions</li>
<li>Latency</li>
<li>Privacy of communication on networks (still trying to come up with a better way of introducing crypto in a hands on way, <a href="/year-7-8-bad-crypto-with-microbits/">my previous attempt was not great</a>)</li>
</ul>
<p>Whilst I still think the ideas are good ones, it was a classic case of plans not surviving contact with the enemy: my students found all the ways to break my programs, misunderstand how they worked, and otherwise turn the exercise into a hassle for a significant minority of the class.</p>
<h2 id="multiple-pairs-of-clients">Multiple Pairs of Clients<a hidden class="anchor" aria-hidden="true" href="#multiple-pairs-of-clients">#</a></h2>
<p>The basic problem boiled down to that whilst it was a great prompt for discussing a lot of the problems with busy wireless networks as well as privacy, having up to 15 pairs of clients all trying to communicate at once is a nightmare.</p>
<p>My original solution was to allocate each pair a wireless group/channel which they manually navigated to via button presses, and then sat blissfully operating in their own little slice of spectrum. Of course this is predicated on students following instructions, not being malicious, not running past their allocated group because they pressed the button too many times (an issue when you hit group 10+ as the display starts slowly scrolling the group number and students get impatient), etc.</p>
<p>For a number of pairs of students, this then turns into a festival of resetting their device to return to the default group and incrementing their group once again, this time with the additional chatter of existing communication flying past on their screens as they waltz through other students&rsquo; channels.</p>
<p>My first solution to this problem was to have a toggle switch for the radio, so devices started out in the off state, you change the group up to yours without network activity to distract you, and then off you go. Seasoned teachers will no doubt predict how much that helped; students didn&rsquo;t pay attention to the fact their radios were off by default, and complained their program wasn&rsquo;t working, got to the correct channel tried it out with the radio turned off and reset their device, etc.</p>
<h2 id="enter-pairing">Enter Pairing<a hidden class="anchor" aria-hidden="true" href="#enter-pairing">#</a></h2>
<p>Over the last year I&rsquo;ve been playing around with writing programs based on wireless signal strength, such as my <a href="/robotics-showcase-epidemic/">PKE Meter</a>. Whilst thinking about modifying my latency program to artificially introduce range-based latency, it hit me that I could use the wireless RSSI value to initially pair Micro:bits for other activities, exchanging device IDs and allowing me to sidestep the annoying problem of changing groups and malicious actors. The Micro:bit already sort of <a href="https://support.microbit.org/support/solutions/articles/19000030849-how-to-use-radio-group-codes-with-the-makecode-editor">does pairing via group numbers</a> (interestingly, using a hash of your code to determine a group number if it is not explicity set!) so I was already doing this, but as a manual step rather than as an automatic process based on proximity.</p>
<p>I whipped up a basic three way handshake pairing system with an RSSI threshold that required the devices to be almost right next to each other and incorporated it into my programs. It remains to be seen how well this will work with 30-odd devices running at once (I&rsquo;ve had issues with the short message queue on Micro:bits before) but I live in hope. Sadly I always have my ideas right at the end of a topic, so I&rsquo;m either going to have to shoe-horn this into another class for testing, co-opt some &lsquo;volunteers&rsquo;, or wait until next year.</p>
<p>Below is the MakeCode pairing code I&rsquo;m currently using (and feels super clumsy and no doubt I&rsquo;ll refine next year when it&rsquo;s too late to use the changes in class again ðŸ¤£).</p>
<style>
    .image-gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 1%;
        margin-left: -1% !important;
    }

    .image-gallery li {
        list-style: none;
        width: 19%;
        display: flex;
        flex-direction: column;
    }

    .image-gallery li a {
        text-align: center;
        text-decoration: none !important;
        color: #777;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        justify-content: space-between;
        box-shadow: none !important;
    }

    .image-gallery li a span {
        display: block;
        padding: 3px 0;
        white-space: normal;
        font-size: 0.8em;
    }

    .image-gallery li a img {
        width: 100%;
        display: block;
    }

     
    @media (max-width: 1200px) {
        .image-gallery li {
            width: 24%;
             
        }
    }

    @media (max-width: 992px) {
        .image-gallery li {
            width: 32%;
             
        }
    }

    @media (max-width: 768px) {
        .image-gallery li {
            width: 49%;
             
        }
    }

    @media (max-width: 576px) {
        .image-gallery li {
            width: 100%;
             
        }
    }
</style>


<ul class="image-gallery">
    <li>
        <a href="/gallery/pairing/pair_radio_1.png" title="pair_radio_1" class="lightbox-image">
            <img src="/gallery/pairing/pair_radio_1.png" alt="pair_radio_1" title="pair_radio_1">
            <span>pair_radio_1</span>
        </a>
    </li>
    <li>
        <a href="/gallery/pairing/pair_radio_2.png" title="pair_radio_2" class="lightbox-image">
            <img src="/gallery/pairing/pair_radio_2.png" alt="pair_radio_2" title="pair_radio_2">
            <span>pair_radio_2</span>
        </a>
    </li>
    <li>
        <a href="/gallery/pairing/pair_request.png" title="pair_request" class="lightbox-image">
            <img src="/gallery/pairing/pair_request.png" alt="pair_request" title="pair_request">
            <span>pair_request</span>
        </a>
    </li>
    
</ul>
<p>The basic process is:</p>
<ul>
<li>Send out a pair request with a 2 second timeout.</li>
<li>Capture a pair request, check for strong signal, increment state, and send reply.</li>
<li>Receive reply, respond with success and pair, or receive response and pair, incrementing state and capturing device ID.</li>
</ul>
<p>Â Here&rsquo;s a <a href="https://makecode.microbit.org/_H1c47MbUceCh">copy of the latency program</a> incorporating the new pairing code (there&rsquo;s a small logic bug to do with the 5 second response timeout on pings I&rsquo;ll figure out eventually - I really dislike debugging block code :( )</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/compsci/">Compsci</a></li>
      <li><a href="/tags/microbit/">Microbit</a></li>
      <li><a href="/tags/networking/">Networking</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Rob Poulter</span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script type="text/javascript" src="/js/lightbox.js"></script>
<link rel="stylesheet" href="/css/lightbox.css">
<script data-goatcounter="https://headtilt_me.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
