<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Dowsing for Radio - Headtilt</title><meta name="description" content="Technology, education, sometimes a mix of the two."><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://headtilt.me/dowsing-for-radio/"><link type="application/atom+xml" rel="alternate" href="https://headtilt.me/feed.xml"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@robpoulter"><meta name="twitter:title" content="Dowsing for Radio"><meta name="twitter:description" content="Technology, education, sometimes a mix of the two."><meta name="twitter:image" content="https://headtilt.me/media/posts/76/IMG_2246.jpg"><link rel="shortcut icon" href="https://headtilt.me/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://fonts.googleapis.com/css?family=Heebo:400,500|Playfair+Display:400" as="font" crossorigin><link rel="stylesheet" href="https://headtilt.me/assets/css/style.css?v=7aaef5a7341c740e40570fe5042e66fa"><link rel="stylesheet" href="https://headtilt.me/assets/css/photoswipe.css?v=966dabfb3dfb423703bc6983e34f4ef2"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://headtilt.me/dowsing-for-radio/"},"headline":"Dowsing for Radio","datePublished":"2019-04-19T14:02","dateModified":"2019-04-19T14:07","image":{"@type":"ImageObject","url":"https://headtilt.me/media/posts/76/IMG_2246.jpg","height":3024,"width":4032},"description":"MotivationThis term I've been working through Data Representation and some Networks concepts&hellip;","author":{"@type":"Person","name":"Rob"},"publisher":{"@type":"Organization","name":"Rob","logo":{"@type":"ImageObject","url":"https://headtilt.me/media/website/slice1.png","height":78,"width":354}}}</script><script async src="https://headtilt.me/assets/js/lazysizes.min.js?v=739e7d27e1cbc58b1b2e6882674b8867"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-35020754-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-35020754-1');</script><link rel="stylesheet" href="https://headtilt.me/assets/css/prism.css?v=94c045ddf0857204ba2afb88a44670fb"></head><body><div class="container"><header class="js-top"><a class="logo" href="https://headtilt.me"><img src="https://headtilt.me/media/website/slice1.png" alt="Headtilt"></a><div class="top"><nav class="navbar js-navbar"><button class="navbar__toggle js-navbar__toggle" aria-expanded="false">Menu</button><ul class="navbar__menu"><li><a href="https://headtilt.me/wag/ramble/" target="_self">Ramble</a></li><li><a href="https://headtilt.me/wag/classroom/" target="_self">Classroom</a></li><li><a href="https://headtilt.me/About/" target="_self">About</a></li></ul></nav></div></header><main><article class="post u-wrapper"><header class="hero"><p class="post__meta">By <a href="https://headtilt.me/authors/rob/" rel="author" title="Rob">Rob</a> Published on <time datetime="2019-04-19T14:02">April 19, 2019</time></p><h1 class="post__title">Dowsing for Radio</h1></header><div class="post__featured-image post__image--normal"><img src="https://headtilt.me/media/posts/76/responsive/IMG_2246-xs.jpg" data-srcset="https://headtilt.me/media/posts/76/responsive/IMG_2246-xs.jpg 300w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-sm.jpg 480w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-md.jpg 768w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-lg.jpg 1024w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-xl.jpg 1360w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-2xl.jpg 1600w ,https://headtilt.me/media/posts/76/responsive/IMG_2246-sm2.jpg 375w" data-sizes="auto" height="3024" width="4032" alt="" class="lazyload blur-up"></div><div class="post__entry"><h2>Motivation</h2><p>This term I've been working through Data Representation and some Networks concepts with my Year 8 students. I used Micro:bits extensively for both aspects of this for the hands-on approach and ready access to simple networking code. To finish off the term, after looking at things like network latency, I thought it'd be fun to do an activity built around attenuation of wireless signals.</p><p>Previously I've had students group up in pairs and have the Micro:bits send an image back and forth pixel by pixel. This allows for students to see when messages have not arrived as they will have missing pixels from their displays.</p><p>This year, coming up to Easter I thought I'd do an egg hunt by measuring signal strength of "beacon" Micro:bits and using different methods to relay that to the user of a detector Micro:bit. I've been meaning to do this sort of activity for a while after seeing the <a href="https://makecode.microbit.org/projects/hot-or-cold">Hot or Cold</a> activity.</p><p class="msg msg--info">I think it would be interesting to do an orienteering activity based on this at some point where students could have their Micro:bit collect data on the beacons they have found and report back for scoring at the end. I'm keeping this idea for our next orientation day activity with our incoming Year 6 students.</p><h2> Physical Design</h2><p>The beacon itself is just a Micro:bit powered by a battery periodically broadcasting a message. The only interesting thing I incorporated into the beacon is being able to change the signal strength so that some beacons are easier to find than others. I found that a strength between 0 and 3 was pretty good for what I wanted.</p><p>My initial designs for the detector simply used a horizontal line on the Micro:bit screen which moved up or down depending on the strength of received messages. It worked fine in a utilitarian kind of way, and since I only have so much space to store bigger housings, most students would use something like this.</p><figure class="post__image post__image--right"><img class="lazyload blur-up" src="https://headtilt.me/media/posts/76/responsive/pke_meter_by_teletran-xs.jpg" data-sizes="auto" data-srcset="https://headtilt.me/media/posts/76/responsive/pke_meter_by_teletran-xs.jpg 300w ,https://headtilt.me/media/posts/76/responsive/pke_meter_by_teletran-sm.jpg 480w ,https://headtilt.me/media/posts/76/responsive/pke_meter_by_teletran-md.jpg 768w ,https://headtilt.me/media/posts/76/responsive/pke_meter_by_teletran-lg.jpg 1024w" alt="PKE Meter - Teletran@Deviantart" width="1024" height="768"><figcaption>PKE Meter design created by <a href="https://www.deviantart.com/teletran/art/PKE-meter-163025300">Teletran (Deviantart)</a></figcaption></figure><p>However, in the spirit of cheesy sci-fi I wanted to build a hand-held detector that had glowy lights and moving parts. Although I didn't recognise it at the time, what I had in my head was the Psycho-Kinetic Energy (P.K.E.) Meter from Ghost Busters.</p><p>Although I initially wanted to have acrylic arms which could be bottom-lit using RGB LEDs, I ended up just using MDF parts, and embedding a single RGB LED in the face of the housing. If I revisit the design later on I'll see about making a fancier version, but I ran out of prototyping time for this design.</p><p>I used a cheap USB power bank for the power supply, and the excellent DFRobot Micro:mate to break out the pins for my LED and servos. </p><div class="gallery" data-is-empty="false" data-columns="3"><figure class="gallery__item"><a href="https://headtilt.me/media/posts/76/gallery/IMG_2248.jpg" data-size="3024x4032"><img src="https://headtilt.me/media/posts/76/gallery/IMG_2248-thumbnail.jpg" alt="Low signal" width="240" height="240"></a><figcaption class="gallery-description">Low signal</figcaption></figure><figure class="gallery__item"><a href="https://headtilt.me/media/posts/76/gallery/IMG_2249.jpg" data-size="3024x4032"><img src="https://headtilt.me/media/posts/76/gallery/IMG_2249-thumbnail.jpg" alt="Medium signal" width="240" height="240"></a><figcaption class="gallery-description">Medium signal</figcaption></figure><figure class="gallery__item"><a href="https://headtilt.me/media/posts/76/gallery/IMG_2250.jpg" data-size="3024x4032"><img src="https://headtilt.me/media/posts/76/gallery/IMG_2250-thumbnail.jpg" alt="Strong signal" width="240" height="240"></a><figcaption class="gallery-description">Strong signal</figcaption></figure></div><h2>Technical Stuff</h2><p>The signal strength (RSSI, measured in dBm) theoretically is measured from -255 to 0, with 0 being the strongest. In my testing however, I rarely saw values outside of -30 to -100, so when converting the received signal strength into a percentage for use as an angle and hue, any readings outside of this space got compressed to the extremes.</p><pre><code class="language-python">
  rssi = abs(rssi) - 30
  if rssi &lt; 0:
      rssi = 0
  elif rssi &gt; 70:
      rssi = 70
  perc = rssi / 70
  </code></pre><p>Signal readings were incredibly spiky taking only one reading at a time, so I tried out a rolling average which worked OK at 10 readings, and significantly better at 25 readings (with a 50ms delay between each reading). It introduced a delay in displaying signal readings, but stopping the jerky behaviour of the servos and flashing of the LED indicators was worth it.</p><pre><code class="language-python">
  last = []
  keep_last = 25 # how long the rolling average should be
  ...
  last.append(perc)
  if len(last) &gt; keep_last:
      del last[0]
  perc_avg = sum(last) / len(last)
  </code></pre><h2>Review</h2><p>Short range radio strength is quite finnicky, and so no matter how much fiddling I do with the code it will never work exactly how I want it due to interference, the direction of the antennas, and what I had for breakfast. However, I think the finished product works passably well, the physical design for the housing gives it a nice theatrical (if boxy) air, and it's a fun activity for the kids to do while learning about some of the properties of wireless communication.</p><p>If anyone is interested in the code or laser cut designs, they are in my <a href="https://github.com/zarify/microbit/tree/master/Radio_Dowsing">Microbit Github repo</a> along with the other things I make.</p><p>I got to test this out with one of my Year 8 classes before school broke up for the holidays, hiding seven beacons behind books in our library and giving teams of three students a detector for each student, the short author code of the book each beacon was behind, and five minutes to match the books up with their title or the Dewey number. They all had a blast so this will definitely be on my list of things to do later on as an engagement activity (even through we didn't have the time to really dig into the details before break).</p><p> <iframe width="640" height="1138" src="https://player.vimeo.com/video/331371137" frameborder="0" allow="autoplay; fullscreen" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe></p><p><a href="https://vimeo.com/331371137">Radio Dowsing with Micro:bit</a> from <a href="https://vimeo.com/user57535714">Rob Poulter</a> on <a href="https://vimeo.com">Vimeo</a>.</p></div><footer class="post__footer"><div class="post__last-updated">This article was updated on April 19, 2019</div><div class="post__footer__col"><ul class="post__tag"><li><a href="https://headtilt.me/wag/classroom/">classroom</a></li><li><a href="https://headtilt.me/wag/microbit/">microbit</a></li></ul></div><nav class="post__nav"><div class="post__nav__prev">Previous Post<h5><a href="https://headtilt.me/designing-a-microbit-robot/" class="inverse" rel="prev">Designing a Micro:bit Robot</a></h5></div></nav></footer></article></main><footer class="footer"><div class="footer__copyright">Powered by inertia.</div><div class="footer__social"><a href="https://twitter.com/robpoulter" aria-label="Twitter"><svg class="icon"><use xlink:href="https://headtilt.me/assets/svg/svg-map.svg#twitter"/></svg></a></div></footer></div><script defer="defer" src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script defer="defer" src="https://headtilt.me/assets/js/scripts.min.js?v=f503b0ac46db9f99180b3b9f932c7f9a"></script><script defer="defer" src="https://headtilt.me/assets/js/photoswipe.min.js?v=9c62086e50d89a9b6a29389a70ee0d65"></script><script defer="defer" src="https://headtilt.me/assets/js/photoswipe-ui-default.min.js?v=aafb02c13ce2b295ff34a8ac0db67cbb"></script><script>var initPhotoSwipeFromDOM=function(gallerySelector){var parseThumbnailElements=function(el){var thumbElements=el.childNodes,numNodes=thumbElements.length,items=[],figureEl,linkEl,size,item;for(var i=0;i<numNodes;i++){figureEl=thumbElements[i];if(figureEl.nodeType!==1){continue;}
              linkEl=figureEl.children[0];size=linkEl.getAttribute('data-size').split('x');item={src:linkEl.getAttribute('href'),w:parseInt(size[0],10),h:parseInt(size[1],10)};if(figureEl.children.length>1){item.title=figureEl.children[1].innerHTML;}
              if(linkEl.children.length>0){item.msrc=linkEl.children[0].getAttribute('src');}
              item.el=figureEl;items.push(item);}
              return items;};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn));};var onThumbnailsClick=function(e){e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=false;var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='FIGURE');});if(!clickedListItem){return;}
              var clickedGallery=clickedListItem.parentNode,childNodes=clickedListItem.parentNode.childNodes,numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1){continue;}
              if(childNodes[i]===clickedListItem){index=nodeIndex;break;}
              nodeIndex++;}
              if(index>=0){openPhotoSwipe(index,clickedGallery);}
              return false;};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params;}
              var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue;}
              var pair=vars[i].split('=');if(pair.length<2){continue;}
              params[pair[0]]=pair[1];}
              if(params.gid){params.gid=parseInt(params.gid,10);}
              return params;};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el.getElementsByTagName('img')[0],pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};},
              mainClass:'',
              hideAnimationDuration:200,
              showAnimationDuration:0,
              bgOpacity: 0.7,
              showHideOpacity:true,
              closeOnScroll: true,
              arrowKeys: true,
              closeEl: true,
              captionEl: true,
              fullscreenEl: true,
              zoomEl: true,
              shareEl: true,
              counterEl: true,
              arrowEl: true,
              preloaderEl: true
              };if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break;}}}else{options.index=parseInt(index,10)-1;}}else{options.index=parseInt(index,10);}
              if(isNaN(options.index)){return;}
              if(disableAnimation){options.showAnimationDuration=0;}
              gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();gallery.options.escKey=true;};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;}
              var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],true,true);}};initPhotoSwipeFromDOM('.gallery');</script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script defer="defer" src="https://headtilt.me/assets/js/prism.js?v=8bd73da1e257fb047aec885f1eb2b93d"></script></body></html>