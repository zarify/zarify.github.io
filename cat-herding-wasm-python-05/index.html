<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>WASM Python - Cat Herding 05 | Headtilt</title>
<meta name="keywords" content="ai, python, llm, agents, cat-herding, wasm-python">
<meta name="description" content="Pre(r)amble
This is part of a(n aspirationally) series of posts documenting some of the process of
(building|cat herding an AI agent to build) an easily hosted Python teaching tool built
with just front-end JS and a WASM port of MicroPython.

You can find Part 1 here
You can find Part 2 here
You can find Part 3 here
You can find Part 4 here
This is Part 5!

I have a (somewhat) up to date version of this tool running on the site. Things might
occasionally be broken, things might not work the same way as they did before.">
<meta name="author" content="Rob">
<link rel="canonical" href="https://headtilt.me/cat-herding-wasm-python-05/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1d79e034ed3fae3cce466e1b13b697315f9998d1ba8d908def178611b372b49f.css" integrity="sha256-HXngNO0/rjzORm4bE7aXMV&#43;ZmNG6jZCN7xeGEbNytJ8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://headtilt.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://headtilt.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://headtilt.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://headtilt.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://headtilt.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://headtilt.me/cat-herding-wasm-python-05/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><script src="https://kit.fontawesome.com/3ec5c52433.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/formatting.css">



</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://headtilt.me/" accesskey="h" title="Adjust your angle (Alt + H)">
                <img src="https://headtilt.me/images/headtilt.png" alt="" aria-label="logo"
                    height="30">Adjust your angle</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://headtilt.me/post" title="posts">
                    <span><i class="fa-solid fa-pen-to-square"></i> posts</span>
                </a>
            </li>
            <li>
                <a href="https://headtilt.me/page/about/" title="about">
                    <span><i class="fa-solid fa-circle-info"></i> about</span>
                </a>
            </li>
            <li>
                <a href="https://headtilt.me/categories/" title="categories">
                    <span><i class="fa-solid fa-layer-group"></i> categories</span>
                </a>
            </li>
            <li>
                <a href="https://headtilt.me/tags/" title="tags">
                    <span><i class="fa-solid fa-tags"></i> tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      WASM Python - Cat Herding 05
    </h1>
    <div class="post-meta"><span title='2025-09-20 15:08:11 +0800 AWST'>Sat, Sep 20, 2025</span>&nbsp;Â·&nbsp;Rob

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#preramble" aria-label="Pre(r)amble">Pre(r)amble</a></li>
                <li>
                    <a href="#what-we-had-before" aria-label="What we had before">What we had before</a></li>
                <li>
                    <a href="#whats-happened-since" aria-label="What&rsquo;s happened since">What&rsquo;s happened since</a><ul>
                        
                <li>
                    <a href="#ui-enhancement" aria-label="UI enhancement">UI enhancement</a></li>
                <li>
                    <a href="#problem-lists" aria-label="Problem lists">Problem lists</a></li>
                <li>
                    <a href="#persistent-success-indicators" aria-label="Persistent success indicators">Persistent success indicators</a></li>
                <li>
                    <a href="#feedback-rule-dependencies" aria-label="Feedback rule dependencies">Feedback rule dependencies</a></li></ul>
                </li>
                <li>
                    <a href="#aintrospection" aria-label="(A)Introspection">(A)Introspection</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="preramble">Pre(r)amble<a hidden class="anchor" aria-hidden="true" href="#preramble">#</a></h2>
<p>This is part of a(n aspirationally) series of posts documenting some of the process of
(building|cat herding an AI agent to build) an easily hosted Python teaching tool built
with just front-end JS and a WASM port of MicroPython.</p>
<ul>
<li><a href="https://headtilt.me/cat-herding-wasm-python-01/">You can find Part 1 here</a></li>
<li><a href="https://headtilt.me/cat-herding-wasm-python-02/">You can find Part 2 here</a></li>
<li><a href="https://headtilt.me/cat-herding-wasm-python-03/">You can find Part 3 here</a></li>
<li><a href="https://headtilt.me/cat-herding-wasm-python-04/">You can find Part 4 here</a></li>
<li>This is Part 5!</li>
</ul>
<p>I have a (somewhat) up to date version of this tool running on the site. Things might
occasionally be broken, things might not work the same way as they did before.</p>
<ul>
<li>The <a href="/clipy">learning interface is here</a></li>
<li>The <a href="/clipy/author">authoring interface is here</a></li>
</ul>
<p>There&rsquo;s a changelog in the authoring interface to give you a bit of an idea of what&rsquo;s
new or different.</p>

            <link rel="stylesheet" href="/css/vendors/admonitions.4fd9a0b8ec8899f2ca952048d255a569f433f77dfb3f52f5bc87e7d65cdce449.css" integrity="sha256-T9mguOyImfLKlSBI0lWlafQz9337P1L1vIfn1lzc5Ek=" crossorigin="anonymous">
    <div class="admonition warning">
      <div class="admonition-header"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>
        <span>Warning</span>
      </div>
      <div class="admonition-content">
        <p>If you&rsquo;ve used this before, you might need to do a hard refresh to clear out
any cached JS or CSS. I should probably put some clearing of IDB storage in there
too, just in case. Maybe next week.</p>
      </div>
    </div><h2 id="what-we-had-before">What we had before<a hidden class="anchor" aria-hidden="true" href="#what-we-had-before">#</a></h2>
<p>See <a href="https://headtilt.me/cat-herding-wasm-python-04/">last week&rsquo;s post</a> for
some of the details and screenshots.</p>
<ul>
<li>Student verification codes (which are going to need some tweaks to the author side with the new problem list feature)</li>
<li>Read-only file support in workspaces</li>
<li>Per-test workspace files</li>
</ul>
<h2 id="whats-happened-since">What&rsquo;s happened since<a hidden class="anchor" aria-hidden="true" href="#whats-happened-since">#</a></h2>
<p>Here are some screenshots of the latest version with some of the new things from this week.</p>
<style>
    .image-gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 1%;
        margin-left: -1% !important;
    }

    .image-gallery li {
        list-style: none;
        width: 19%;
        display: flex;
        flex-direction: column;
    }

    .image-gallery li a {
        text-align: center;
        text-decoration: none !important;
        color: #777;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
        justify-content: space-between;
        box-shadow: none !important;
    }

    .image-gallery li a span {
        display: block;
        padding: 3px 0;
        white-space: normal;
        font-size: 0.8em;
    }

    .image-gallery li a img {
        width: 100%;
        display: block;
    }

     
    @media (max-width: 1200px) {
        .image-gallery li {
            width: 24%;
             
        }
    }

    @media (max-width: 992px) {
        .image-gallery li {
            width: 32%;
             
        }
    }

    @media (max-width: 768px) {
        .image-gallery li {
            width: 49%;
             
        }
    }

    @media (max-width: 576px) {
        .image-gallery li {
            width: 100%;
             
        }
    }
</style>


<ul class="image-gallery">
    <li>
        <a href="/gallery/clipy/week5/01_config_list_collapsed.png" title="01_config_list_collapsed" class="lightbox-image">
            <img src="/gallery/clipy/week5/01_config_list_collapsed.png" alt="01_config_list_collapsed" title="01_config_list_collapsed">
            <span>01_config_list_collapsed</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/02_config_list_expanded.png" title="02_config_list_expanded" class="lightbox-image">
            <img src="/gallery/clipy/week5/02_config_list_expanded.png" alt="02_config_list_expanded" title="02_config_list_expanded">
            <span>02_config_list_expanded</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/03_feedback_msg_optional.png" title="03_feedback_msg_optional" class="lightbox-image">
            <img src="/gallery/clipy/week5/03_feedback_msg_optional.png" alt="03_feedback_msg_optional" title="03_feedback_msg_optional">
            <span>03_feedback_msg_optional</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/04_success_indicator_title.png" title="04_success_indicator_title" class="lightbox-image">
            <img src="/gallery/clipy/week5/04_success_indicator_title.png" alt="04_success_indicator_title" title="04_success_indicator_title">
            <span>04_success_indicator_title</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/05_success_indicator_configlist.png" title="05_success_indicator_configlist" class="lightbox-image">
            <img src="/gallery/clipy/week5/05_success_indicator_configlist.png" alt="05_success_indicator_configlist" title="05_success_indicator_configlist">
            <span>05_success_indicator_configlist</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/06_success_indicator_snapshot.png" title="06_success_indicator_snapshot" class="lightbox-image">
            <img src="/gallery/clipy/week5/06_success_indicator_snapshot.png" alt="06_success_indicator_snapshot" title="06_success_indicator_snapshot">
            <span>06_success_indicator_snapshot</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/07_admonitions_markdown.png" title="07_admonitions_markdown" class="lightbox-image">
            <img src="/gallery/clipy/week5/07_admonitions_markdown.png" alt="07_admonitions_markdown" title="07_admonitions_markdown">
            <span>07_admonitions_markdown</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/08_disabled_run_key.png" title="08_disabled_run_key" class="lightbox-image">
            <img src="/gallery/clipy/week5/08_disabled_run_key.png" alt="08_disabled_run_key" title="08_disabled_run_key">
            <span>08_disabled_run_key</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/09_dependent_feedback_neg.png" title="09_dependent_feedback_neg" class="lightbox-image">
            <img src="/gallery/clipy/week5/09_dependent_feedback_neg.png" alt="09_dependent_feedback_neg" title="09_dependent_feedback_neg">
            <span>09_dependent_feedback_neg</span>
        </a>
    </li>
    <li>
        <a href="/gallery/clipy/week5/10_dependent_feedback_pos.png" title="10_dependent_feedback_pos" class="lightbox-image">
            <img src="/gallery/clipy/week5/10_dependent_feedback_pos.png" alt="10_dependent_feedback_pos" title="10_dependent_feedback_pos">
            <span>10_dependent_feedback_pos</span>
        </a>
    </li>
    
</ul>
<h3 id="ui-enhancement">UI enhancement<a hidden class="anchor" aria-hidden="true" href="#ui-enhancement">#</a></h3>
<p>I&rsquo;ve been trying to make things generally better looking and nicer to use, given that I typically
rock a pretty utilitarian aesthetic by default. Some of the changes are (you can see some of them in
the screenshots):</p>
<ul>
<li>Shifting to non-emoji feedback indicators</li>
<li>Feedback messages are now optional - the indicator and the title should do most of the job</li>
<li>Run tests now visibly disabled when there are no tests to run</li>
<li>Added an admonition extension to markdown rendering so authors can provide highlights to different types of content</li>
</ul>
<h3 id="problem-lists">Problem lists<a hidden class="anchor" aria-hidden="true" href="#problem-lists">#</a></h3>
<p>One of the things that bothered me about the initial design was the friction in getting multiple
problems out to students. Each problem would have needed to have a new link with a URL parameter
to load the next problem. Given that some problems might not take very long to solve, this would
mean lots of bouncing back to a LMS page or email. However I still wanted to be able to have single
problems loadable.</p>
<p>So now we support lists of problems (in a <code>json</code> file format) that can be passed to the app just
like individual problems. If the config file passed to the app ends up being a config list rather
than a single problem, the user is presented with a menu to navigate through the different problem
files found in the list (with its own problem set title in the page header). This way, we can still
respect the &ldquo;client side only&rdquo; nature of the app, but also make it possible to have a learning
sequence.</p>
<p><a href="/clipy?config=https://raw.githubusercontent.com/zarify/clipy-configs/refs/heads/main/index.json">I have a config list containing simple test scripts that you can load here</a></p>
<p>There is also a basic config list that loads by default.</p>
<h3 id="persistent-success-indicators">Persistent success indicators<a hidden class="anchor" aria-hidden="true" href="#persistent-success-indicators">#</a></h3>
<p>The problem with potentially not just seeing a single problem anymore is it&rsquo;s less likely to take
just one session to solve them, so how do students keep track of their progress? Enter persistent
success indicators in a few places:</p>
<ul>
<li>The page header now gets a success indicator if the student has passed the test suite for a single problem</li>
<li>If a problem is part of a list, then we also badge problems with passing solutions in the drop-down menu for navigating between problems (this one was a struggle for the agent, and it broke things a few time ð« )</li>
<li>A &lsquo;passing&rsquo; snapshot is created (or updated) each time a test suite is passed.</li>
</ul>
<p>This gives students a few places where, if they pick up a problem set in another session, they can
get a good visual indicator of whether or not they have passed a problem or not. The snapshot indicator
also tells them <em>when</em> they passed the test suite last.</p>
<h3 id="feedback-rule-dependencies">Feedback rule dependencies<a hidden class="anchor" aria-hidden="true" href="#feedback-rule-dependencies">#</a></h3>
<p>I love feedback flexibility, and from personal experience it&rsquo;s frustrating when the ability to give feedback
is limited by the tools you have to provide it. One of the features I added to testing that made me
pretty happy was conditional runs for tests and grouping.</p>
<p>This time I added some flexibility to when feedback rules trigger:</p>
<ul>
<li>Each feedback item can be dependent on a list of other feedback items to trigger</li>
<li>Feedback dependency can be either &ldquo;must match&rdquo; or &ldquo;must not match&rdquo;</li>
<li>Combining this with default hidden behaviour means you can surface &ldquo;just in time&rdquo; feedback means you can build some pretty flexible feedback types</li>
</ul>
<h2 id="aintrospection">(A)Introspection<a hidden class="anchor" aria-hidden="true" href="#aintrospection">#</a></h2>
<p>This week has been a bit of messing around trying to spec out problems in a way that makes it clear
what I don&rsquo;t want to get broken, doing a <em>whole lot</em> of regression testing (much of it manual because
I need to get around to putting together some decent e2e tests, and because there are a lot of round trips
into browser storage more isolated tests aren&rsquo;t always a great indication of whether something has worked,
or rather, not broken anything).</p>
<p>One of the (funny|frustrating) things about agent instruction is the utter lack of self-awareness. There have
been a couple of sessions where I&rsquo;ve been working on a feature and it doesn&rsquo;t work out the way I intended, or,
after using the initial version a few times, I change my mind about how it should work. The agent then turns
and tries to implement legacy migration features for something that hasn&rsquo;t even been committed yet, let
alone pushed. The minor funny version of this is it&rsquo;ll write some code, I&rsquo;ll test it, authorise the next step
and it&rsquo;ll tell me all about all the changes that it sees I&rsquo;ve made, despite it having just written the code.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://headtilt.me/tags/ai/">Ai</a></li>
      <li><a href="https://headtilt.me/tags/python/">Python</a></li>
      <li><a href="https://headtilt.me/tags/llm/">Llm</a></li>
      <li><a href="https://headtilt.me/tags/agents/">Agents</a></li>
      <li><a href="https://headtilt.me/tags/cat-herding/">Cat-Herding</a></li>
      <li><a href="https://headtilt.me/tags/wasm-python/">Wasm-Python</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>Rob Poulter</span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script type="text/javascript" src="/js/lightbox.js"></script>
<link rel="stylesheet" href="/css/lightbox.css">
<script data-goatcounter="https://headtilt_me.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
