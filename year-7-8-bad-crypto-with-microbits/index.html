<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Year 7-8: Bad Crypto with Microbits - Headtilt</title><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://headtilt.me/year-7-8-bad-crypto-with-microbits/"><link rel="amphtml" href="https://headtilt.me/amp/year-7-8-bad-crypto-with-microbits/"><link type="application/atom+xml" rel="alternate" href="https://headtilt.me/feed.xml"><meta property="og:title" content="Year 7-8: Bad Crypto with Microbits"><meta property="og:image" content="https://headtilt.me/media/website/slice1.png"><meta property="og:site_name" content="Ramble - Headtilt"><meta property="og:description" content="Security of Wireless NetworksMy previous lesson looking at wireless networks used Microbits&hellip;"><meta property="og:url" content="https://headtilt.me/year-7-8-bad-crypto-with-microbits/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@robpoulter"><meta name="twitter:title" content="Year 7-8: Bad Crypto with Microbits"><meta name="twitter:description" content="Security of Wireless NetworksMy previous lesson looking at wireless networks used Microbits&hellip;"><meta name="twitter:image" content="https://headtilt.me/media/website/slice1.png"><link rel="shortcut icon" href="https://headtilt.me/media/website/favicon.ico" type="image/x-icon"><link rel="preload" href="https://fonts.googleapis.com/css?family=Heebo:400,500|Playfair+Display:400" as="font" crossorigin><link rel="stylesheet" href="https://headtilt.me/assets/css/style.css?v=3ddf22e2e2803ef4e83e73570b210d8f"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://headtilt.me/year-7-8-bad-crypto-with-microbits/"},"headline":"Year 7-8: Bad Crypto with Microbits","datePublished":"2017-05-14T11:45","dateModified":"2018-08-19T09:38","image":{"@type":"ImageObject","url":"https://headtilt.me/media/website/slice1.png","height":78,"width":354},"description":"Security of Wireless NetworksMy previous lesson looking at wireless networks used Microbits&hellip;","author":{"@type":"Person","name":"Rob"},"publisher":{"@type":"Organization","name":"Rob","logo":{"@type":"ImageObject","url":"https://headtilt.me/media/website/slice1.png","height":78,"width":354}}}</script><script async src="https://headtilt.me/assets/js/lazysizes.min.js?v=739e7d27e1cbc58b1b2e6882674b8867"></script></head><body><div class="container"><header class="js-top"><a class="logo" href="https://headtilt.me"><img src="https://headtilt.me/media/website/slice1.png" alt="Headtilt"></a><div class="top"><nav class="navbar js-navbar"><button class="navbar__toggle js-navbar__toggle" aria-expanded="false">Menu</button><ul class="navbar__menu"><li><a href="https://headtilt.me/wag/ramble/" target="_self">Ramble</a></li><li><a href="https://headtilt.me/wag/classroom/" target="_self">Classroom</a></li><li><a href="https://headtilt.me/repeat/" target="_self">Repeat</a></li><li><a href="https://headtilt.me/wag/microblog/" target="_self">Microblog</a></li><li><a href="https://headtilt.me/About/" target="_self">About</a></li></ul></nav><div class="top__search"><form action="https://headtilt.me/search.html" class="search"><input type="search" name="q" placeholder="search..."></form></div></div></header><main><article class="post u-wrapper"><header class="hero"><p class="post__meta">By <a href="https://headtilt.me/authors/rob/" rel="author" title="Rob">Rob</a> Published on <time datetime="2017-05-14T11:45">May 14, 2017</time></p><h1 class="post__title">Year 7-8: Bad Crypto with Microbits</h1></header><div class="post__entry"><h1>Security of Wireless Networks</h1><p>My <a href="https://headtilt.me/year-7-8-wireless-network-concepts-with-microbits/">previous lesson</a> looking at wireless networks used Microbits and their Bluetooth networking to illustrate some of the problems with local wireless networks (as opposed to general internet connectivity, which we mostly did by doing speed tests and complaining about the school's net connection :).</p><p>At the end I wrote a bit about what I wanted to do with the next lesson, which was look at some basic crypto to handle the eavesdropping problem we had when someone else listened to the same channel we were communicating on.</p><p>(<strong>Note for anyone who wants to yell at me through the internet:</strong> I'm well aware that this is not anything approaching real crypto, and I'll be the first to tell my kids that if they want to know more about how modern crypto really works, the first thing they need to do is go and find someone who really understands it - this is about what it does, not how it works.)</p><figure class="post__image post__image--right"><img class="lazyload blur-up" src="https://headtilt.me/media/posts/68/responsive/Almighty+XOR-xs.png" data-sizes="auto" data-srcset="https://headtilt.me/media/posts/68/responsive/Almighty+XOR-xs.png 300w ,https://headtilt.me/media/posts/68/responsive/Almighty+XOR-sm.png 480w ,https://headtilt.me/media/posts/68/responsive/Almighty+XOR-md.png 768w ,https://headtilt.me/media/posts/68/responsive/Almighty+XOR-lg.png 1024w" alt=" The Almighty XOR "><figcaption>The Almighty XOR and his hammer MjollNOR</figcaption></figure><p>After running into a bit of a wall trying to get a <a target="_blank" href="https://en.wikipedia.org/wiki/XOR_cipher" rel="noopener noreferrer">XOR cipher</a> working in the block coding interface, I started to dig into the MicroPython interface instead. Along the way I discovered that there was a <a target="_blank" href="https://codewith.mu" rel="noopener noreferrer">rather nice basic IDE called Mu</a>, which lets you flash your code straight to the device, as well as running a REPL (Run-Evaluate-Print-Loop) to do easy code testing (which also works breaking into running code, so you can load functions onto the Microbit, then run and test them in the REPL interface).</p><h1>The Results</h1><p>I haven't used this with my classes yet, but I'll edit this post at the end of the week and add in how things went.</p><p>This version uses a shake of the Microbit to choose a random image, mostly because getting A+B button presses working was annoying - see the Issues section later on, but also because I wanted to play with accelerometer gestures in Python. The A button transmits the image over whatever channel the device is listening to.</p><p>The B button switches channels, but I also made it switch between clear text and cipher text modes. You will see in the video when I press the B button for a second time on a channel the top-right LED lights up and the channel number stays the same. This indicates cipher text mode. It still listens on the same channel, but uses its cipher bitstring to decode any communication it receives (whether or not it's actually encrypted :).</p><p>Below is a short video showing how this version of the program works.</p><p><iframe width="540" height="360" src="https://player.vimeo.com/video/217366606?wmode=opaque&amp;api=1" frameborder="0" title="Dodgy Crypto with Networked Microbits" webkitallowfullscreen="webkitallowfullscreen" mozallowfullscreen="mozallowfullscreen" allowfullscreen="allowfullscreen"></iframe></p><p>Again, if you want to look at the Python code, or download the .hex file to load onto a Microbit via copying, you can grab them from <a target="_blank" href="https://github.com/zarify/microbit/tree/master/bad_crypto" rel="noopener noreferrer">the github repo</a>.</p><h1>Issues</h1><p>As usual, there were some issues I ran into along the way.</p><p>Event-driven programming in MicroPython just isn't there. With the block interface it <em>seems</em> that event listeners get their own processes, so you can break into say a radio's receive section using a button's code. With Python the lack of event listeners is slightly mitigated with things like buttons keeping track of whether they have been pressed since you last examined them (<strong>button_a.is_pressed()</strong> vs <strong>button_a.was_pressed()</strong> for example). This is fine for a simple main loop, but you still need to be careful not to lock yourself out with delays, particularly since I found a few situations where I had to build in delays just to cope with the length of time it takes to un-depress a button.</p><p>Debugging is still annoying. Let's say there's a syntax error in your code, because you're just not paying attention. The Microbit will try and be helpful and, when it flashes and restarts, will tell you about any errors using the LED array. However, trying to read an error message scrolling across the LED array is just plain painful, since it is quite bright, and also only shows you about a character and a half at a time. If you're lucky, opening a REPL will also give you the error message in a way that preserves your eyes and your sanity, but I didn't have this work all the time. I just tried to ignore the bright lights, and focus on the bit where it told you the line number of the error.</p><p>I quite like Mu. It's clean, simple, has (slightly overzealous) code completion, and it's nice getting to the REPL and being able to do code introspection. BUT Mu's 'check syntax' function checks syntax, but also highlights lines that don't obey its style guidelines. So this means if you're somewhat lazy about putting spaces after commas in argument lists or list definitions, you'll get exactly the same red indicator at the start of the line as a genuine syntax error (and it is <strong>very</strong> opinionated about coding style, oh, and not being able to find an EOF at the end of the file).</p><p>Lastly, writing code which you can only interface with using two buttons and some basic gestures is hard. Talk about minimalism in UI design.</p></div><footer class="post__footer"><div class="post__last-updated">This article was updated on August 19, 2018</div><div class="post__footer__col"></div><nav class="post__nav"><div class="post__nav__prev">Previous Post<h5><a href="https://headtilt.me/year-7-8-wireless-network-concepts-with-microbits/" class="inverse" rel="prev">Year 7-8: Wireless Network Concepts with Microbits</a></h5></div><div class="post__nav__next">Next Post<h5><a href="https://headtilt.me/Test-post-to-microblog-tag/" class="inverse" rel="next">Test post to microblog tag</a></h5></div></nav></footer></article></main><footer class="footer"><div class="footer__copyright">Powered by inertia.</div><div class="footer__social"><a href="https://twitter.com/robpoulter" aria-label="Twitter"><svg class="icon"><use xlink:href="https://headtilt.me/assets/svg/svg-map.svg#twitter"/></svg></a></div></footer></div><script defer="defer" src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script><script defer="defer" src="https://headtilt.me/assets/js/scripts.min.js?v=f503b0ac46db9f99180b3b9f932c7f9a"></script></body></html>